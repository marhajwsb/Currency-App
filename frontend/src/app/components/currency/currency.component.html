<div class="currency-container">
  <h1>NBP Currency Explorer</h1>

  <section class="controls">
    <div class="input-group">
      <label for="date-picker">Wybierz datę:</label>
      <input type="date" id="date-picker" [(ngModel)]="selectedDate" (change)="onDateChange()">
    </div>
    
    <div class="button-group">
      <button (click)="onFetchFromNBP()" [disabled]="loading" class="btn-fetch">
        {{ loading ? 'Pobieranie...' : 'Pobierz z NBP do bazy' }}
      </button>
    </div>
  </section>

  <div *ngIf="errorMessage" class="error-banner">{{ errorMessage }}</div>

  <section class="results">
    <table *ngIf="rates.length > 0 && !isSearching">
      <thead>
        <tr>
          <th>Kod Waluty</th>
          <th>Kurs (PLN)</th>
          <th>Rok</th>
          <th>Kwartał</th>
          <th>Miesiąc</th>
          <th>Dzień</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of rates">
          <td><strong>{{ r.code }}</strong></td>
          <td>{{ r.rate | number:'1.2-4' }}</td>
          <td>{{ getYear(r.date) }}</td>
          <td>Q{{ getQuarter(r.date) }}</td>
          <td>{{ getMonth(r.date) }}</td>
          <td>{{ r.date }}</td>
        </tr>
      </tbody>
    </table>

    <div class="status-container">
      <div *ngIf="loading || isSearching" class="spinner">
        Przetwarzanie danych...
      </div>

      <div *ngIf="rates.length === 0 && !loading && !isSearching" class="no-data-box">
        <p class="info">Brak danych w lokalnej bazie dla wybranej daty.</p>
        <p class="hint">Kliknij przycisk, aby zaktualizować bazę z serwerów NBP.</p>
      </div>
    </div>
  </section>
</div>